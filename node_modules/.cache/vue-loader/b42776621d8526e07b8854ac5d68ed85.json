{"remainingRequest":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/src/views/fan/fan_un/fan_un.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/src/views/fan/fan_un/fan_un.vue","mtime":1736429902015},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/cache-loader/dist/cjs.js","mtime":1735892181475},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/babel-loader/lib/index.js","mtime":1735892181655},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/cache-loader/dist/cjs.js","mtime":1735892181475},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/vue-loader/lib/index.js","mtime":1735892182047}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgZ2V0VW5mb2xsb3dlZEJhbmRzLAogIGdldFVuZm9sbG93ZWRBbGJ1bXMsCiAgZ2V0VW5mb2xsb3dlZFNvbmdzLAogIGdldFVuYXR0ZW5kZWRDb25jZXJ0cywKICBhZGRMaWtlZEJhbmQsCiAgYWRkTGlrZWRBbGJ1bSwKICBhZGRMaWtlZFNvbmcsCiAgYWRkQXR0ZW5kZWRDb25jZXJ0LAp9IGZyb20gIkAvYXBpL3JlcXVlc3QiOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7IC8vIOW8leWFpSBtb21lbnQuanMKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRmFuSGVMaWtlcyIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVuZm9sbG93ZWRCYW5kczogW10sCiAgICAgIHVuZm9sbG93ZWRBbGJ1bXM6IFtdLAogICAgICB1bmZvbGxvd2VkU29uZ3M6IFtdLAogICAgICB1bmF0dGVuZGVkQ29uY2VydHM6IFtdLAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBmYW5JZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmZhbklkOwogICAgfSwKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldFVuZm9sbG93ZWREYXRhKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDojrflj5bmiYDmnInmnKrlhbPms6jnmoTmlbDmja4KICAgIGdldFVuZm9sbG93ZWREYXRhKCkgewogICAgICBnZXRVbmZvbGxvd2VkQmFuZHModGhpcy5mYW5JZCkudGhlbigocmVzKSA9PiB7CiAgICAgICAgdGhpcy51bmZvbGxvd2VkQmFuZHMgPSByZXMuZGF0YTsKICAgICAgfSk7CiAgICAgIGdldFVuZm9sbG93ZWRBbGJ1bXModGhpcy5mYW5JZCkudGhlbigocmVzKSA9PiB7CiAgICAgICAgdGhpcy51bmZvbGxvd2VkQWxidW1zID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgICBnZXRVbmZvbGxvd2VkU29uZ3ModGhpcy5mYW5JZCkudGhlbigocmVzKSA9PiB7CiAgICAgICAgdGhpcy51bmZvbGxvd2VkU29uZ3MgPSByZXMuZGF0YTsKICAgICAgfSk7CiAgICAgIGdldFVuYXR0ZW5kZWRDb25jZXJ0cyh0aGlzLmZhbklkKS50aGVuKChyZXMpID0+IHsKICAgICAgICB0aGlzLnVuYXR0ZW5kZWRDb25jZXJ0cyA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDliLfmlrDliJfooagKICAgIHJlZnJlc2goZXZlbnQpIHsKICAgICAgdGhpcy5sb3N0Qmx1cihldmVudCk7CiAgICAgIHRoaXMuZ2V0VW5mb2xsb3dlZERhdGEoKTsKICAgIH0sCiAgICAvLyDlhbPms6jkuZDpmJ8KICAgIGZvbGxvd0JhbmQoYmFuZElkKSB7CiAgICAgIGFkZExpa2VkQmFuZCh0aGlzLmZhbklkLCBiYW5kSWQpLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMuJG1lc3NhZ2UoeyB0eXBlOiAic3VjY2VzcyIsIG1lc3NhZ2U6ICLlhbPms6jmiJDlip8hIiB9KTsKICAgICAgICB0aGlzLmdldFVuZm9sbG93ZWREYXRhKCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWFs+azqOS4k+i+kQogICAgZm9sbG93QWxidW0oYWxidW1JZCkgewogICAgICBhZGRMaWtlZEFsYnVtKHRoaXMuZmFuSWQsIGFsYnVtSWQpLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMuJG1lc3NhZ2UoeyB0eXBlOiAic3VjY2VzcyIsIG1lc3NhZ2U6ICLlhbPms6jmiJDlip8hIiB9KTsKICAgICAgICB0aGlzLmdldFVuZm9sbG93ZWREYXRhKCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWFs+azqOatjOabsgogICAgZm9sbG93U29uZyhzb25nSWQpIHsKICAgICAgYWRkTGlrZWRTb25nKHRoaXMuZmFuSWQsIHNvbmdJZCkudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7IHR5cGU6ICJzdWNjZXNzIiwgbWVzc2FnZTogIuWFs+azqOaIkOWKnyEiIH0pOwogICAgICAgIHRoaXMuZ2V0VW5mb2xsb3dlZERhdGEoKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5Y+C5Yqg5ryU5ZSx5LyaCiAgICBhdHRlbmRDb25jZXJ0KGNvbmNlcnRJZCkgewogICAgICBhZGRBdHRlbmRlZENvbmNlcnQodGhpcy5mYW5JZCwgY29uY2VydElkKS50aGVuKCgpID0+IHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsgdHlwZTogInN1Y2Nlc3MiLCBtZXNzYWdlOiAi5Y+C5Yqg5oiQ5YqfISIgfSk7CiAgICAgICAgdGhpcy5nZXRVbmZvbGxvd2VkRGF0YSgpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDlpLHnhKblpITnkIYKICAgIGxvc3RCbHVyKGV2ZW50KSB7CiAgICAgIGxldCB0YXJnZXQgPSBldmVudC50YXJnZXQ7CiAgICAgIGlmICh0YXJnZXQubm9kZU5hbWUgPT0gIlNQQU4iKSB7CiAgICAgICAgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0LnBhcmVudE5vZGU7CiAgICAgIH0KICAgICAgdGFyZ2V0LmJsdXIoKTsKICAgIH0sCiAgICAvLyDmoLzlvI/ljJbml6XmnJ8KICAgIGZvcm1hdERhdGUoZGF0ZSkgewogICAgICByZXR1cm4gZGF0ZSA/IG1vbWVudChkYXRlKS5mb3JtYXQoJ1lZWVktTU0tREQgSEg6bW06c3MnKSA6ICcnOwogICAgfQogIH0sCn07Cg=="},{"version":3,"sources":["fan_un.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"fan_un.vue","sourceRoot":"src/views/fan/fan_un","sourcesContent":["<template>\n  <div class=\"fan-likes\">\n    <div class=\"container_wrap\">\n      <div class=\"batchOption\">\n        <el-button icon=\"el-icon-refresh\" type=\"warning\" @click=\"refresh($event)\"\n          >刷新列表</el-button\n        >\n      </div>\n\n      <!-- 未关注的乐队 -->\n      <el-table :data=\"unfollowedBands\" border class=\"table\">\n        <el-table-column prop=\"BandName\" label=\"乐队名称\" width=\"150\">\n        </el-table-column>\n        <el-table-column prop=\"FormationDate\" label=\"成立日期\" width=\"150\">\n          <template slot-scope=\"scope\">\n            {{ formatDate(scope.row.FormationDate) }}\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"BandDescription\" label=\"乐队描述\" width=\"200\">\n        </el-table-column>\n        <el-table-column label=\"操作\">\n          <template slot-scope=\"scope\">\n            <el-button\n              size=\"mini\"\n              type=\"primary\"\n              icon=\"el-icon-plus\"\n              @click=\"followBand(scope.row.BandID)\"\n              >关注</el-button\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <!-- 未关注的专辑 -->\n      <el-table :data=\"unfollowedAlbums\" border class=\"table\">\n        <el-table-column prop=\"AlbumName\" label=\"专辑名称\" width=\"150\">\n        </el-table-column>\n        <el-table-column prop=\"ReleaseDate\" label=\"发行日期\" width=\"150\">\n          <template slot-scope=\"scope\">\n            {{ formatDate(scope.row.ReleaseDate) }}\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"AlbumDescription\" label=\"专辑描述\" width=\"200\">\n        </el-table-column>\n        <el-table-column label=\"操作\">\n          <template slot-scope=\"scope\">\n            <el-button\n              size=\"mini\"\n              type=\"primary\"\n              icon=\"el-icon-plus\"\n              @click=\"followAlbum(scope.row.AlbumID)\"\n              >关注</el-button\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <!-- 未关注的歌曲 -->\n      <el-table :data=\"unfollowedSongs\" border class=\"table\">\n        <el-table-column prop=\"SongName\" label=\"歌曲名称\" width=\"150\">\n        </el-table-column>\n        <el-table-column prop=\"Lyricist\" label=\"作词人\" width=\"150\">\n        </el-table-column>\n        <el-table-column prop=\"Composer\" label=\"作曲人\" width=\"150\">\n        </el-table-column>\n        <el-table-column label=\"操作\">\n          <template slot-scope=\"scope\">\n            <el-button\n              size=\"mini\"\n              type=\"primary\"\n              icon=\"el-icon-plus\"\n              @click=\"followSong(scope.row.SongID)\"\n              >关注</el-button\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <!-- 未参加的演唱会 -->\n      <el-table :data=\"unattendedConcerts\" border class=\"table\">\n        <el-table-column prop=\"ConcertName\" label=\"演唱会名称\" width=\"150\">\n        </el-table-column>\n        <el-table-column prop=\"ConcertDate\" label=\"演唱会日期\" width=\"150\">\n          <template slot-scope=\"scope\">\n            {{ formatDate(scope.row.ConcertDate) }}\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"Location\" label=\"地点\" width=\"150\">\n        </el-table-column>\n        <el-table-column label=\"操作\">\n          <template slot-scope=\"scope\">\n            <el-button\n              size=\"mini\"\n              type=\"primary\"\n              icon=\"el-icon-plus\"\n              @click=\"attendConcert(scope.row.ConcertID)\"\n              >参加</el-button\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {\n  getUnfollowedBands,\n  getUnfollowedAlbums,\n  getUnfollowedSongs,\n  getUnattendedConcerts,\n  addLikedBand,\n  addLikedAlbum,\n  addLikedSong,\n  addAttendedConcert,\n} from \"@/api/request\";\nimport moment from \"moment\"; // 引入 moment.js\n\nexport default {\n  name: \"FanHeLikes\",\n  data() {\n    return {\n      unfollowedBands: [],\n      unfollowedAlbums: [],\n      unfollowedSongs: [],\n      unattendedConcerts: [],\n    };\n  },\n  computed: {\n    fanId() {\n      return this.$store.state.fanId;\n    },\n  },\n  created() {\n    this.getUnfollowedData();\n  },\n  methods: {\n    // 获取所有未关注的数据\n    getUnfollowedData() {\n      getUnfollowedBands(this.fanId).then((res) => {\n        this.unfollowedBands = res.data;\n      });\n      getUnfollowedAlbums(this.fanId).then((res) => {\n        this.unfollowedAlbums = res.data;\n      });\n      getUnfollowedSongs(this.fanId).then((res) => {\n        this.unfollowedSongs = res.data;\n      });\n      getUnattendedConcerts(this.fanId).then((res) => {\n        this.unattendedConcerts = res.data;\n      });\n    },\n    // 刷新列表\n    refresh(event) {\n      this.lostBlur(event);\n      this.getUnfollowedData();\n    },\n    // 关注乐队\n    followBand(bandId) {\n      addLikedBand(this.fanId, bandId).then(() => {\n        this.$message({ type: \"success\", message: \"关注成功!\" });\n        this.getUnfollowedData();\n      });\n    },\n    // 关注专辑\n    followAlbum(albumId) {\n      addLikedAlbum(this.fanId, albumId).then(() => {\n        this.$message({ type: \"success\", message: \"关注成功!\" });\n        this.getUnfollowedData();\n      });\n    },\n    // 关注歌曲\n    followSong(songId) {\n      addLikedSong(this.fanId, songId).then(() => {\n        this.$message({ type: \"success\", message: \"关注成功!\" });\n        this.getUnfollowedData();\n      });\n    },\n    // 参加演唱会\n    attendConcert(concertId) {\n      addAttendedConcert(this.fanId, concertId).then(() => {\n        this.$message({ type: \"success\", message: \"参加成功!\" });\n        this.getUnfollowedData();\n      });\n    },\n    // 失焦处理\n    lostBlur(event) {\n      let target = event.target;\n      if (target.nodeName == \"SPAN\") {\n        target = event.target.parentNode;\n      }\n      target.blur();\n    },\n    // 格式化日期\n    formatDate(date) {\n      return date ? moment(date).format('YYYY-MM-DD HH:mm:ss') : '';\n    }\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.fan-likes {\n  .batchOption {\n    margin-bottom: 5px;\n    .el-button {\n      font-size: 10px;\n      padding: 5px;\n    }\n  }\n  .table {\n    margin-bottom: 20px;\n  }\n}\n</style>"]}]}