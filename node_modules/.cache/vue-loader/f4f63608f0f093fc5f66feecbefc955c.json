{"remainingRequest":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/src/views/fan/fan_heLikes/FanLikesSong/Dialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/src/views/fan/fan_heLikes/FanLikesSong/Dialog.vue","mtime":1735995528681},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/cache-loader/dist/cjs.js","mtime":1735892181475},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/babel-loader/lib/index.js","mtime":1735892181655},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/cache-loader/dist/cjs.js","mtime":1735892181475},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/vue-loader/lib/index.js","mtime":1735892182047}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHVwZGF0ZUxpa2VkU29uZywgYWRkTGlrZWRTb25nIH0gZnJvbSAiQC9hcGkvcmVxdWVzdCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlNvbmdEaWFsb2ciLAogIHByb3BzOiB7CiAgICBkaWFsb2dFZGl0VmlzaWJsZTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9LAogICAgfSwKICAgIHNvbmdJbmZvOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4ge307CiAgICAgIH0sCiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgY2hpbGRDbG9zZSgpIHsKICAgICAgdGhpcy5kaWFsb2dFZGl0VmlzaWJsZS52YWx1ZSA9IGZhbHNlOwogICAgfSwKICAgIC8vIOaPkOS6pOihqOWNlQogICAgc3VibWl0Rm9ybShmb3JtTmFtZSkgewogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIGlmICh0aGlzLnNvbmdJbmZvLlNvbmdJRCkgewogICAgICAgICAgICAvLyDmm7TmlrDllpzmrKLnmoTmrYzmm7Lkv6Hmga8KICAgICAgICAgICAgdXBkYXRlTGlrZWRTb25nKHRoaXMuJHN0b3JlLnN0YXRlLmZhbklkLCB0aGlzLnNvbmdJbmZvLlNvbmdJRCwgdGhpcy5zb25nSW5mbykKICAgICAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsgbWVzc2FnZTogIuabtOaWsOaIkOWKnyIsIHR5cGU6ICJzdWNjZXNzIiB9KTsKICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoInVwZGF0ZVNvbmciLCB0aGlzLnNvbmdJbmZvKTsKICAgICAgICAgICAgICAgIHRoaXMuY2hpbGRDbG9zZSgpOwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuabtOaWsOWksei0pSEiKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIOaWsOWinuWWnOasoueahOatjOabsgogICAgICAgICAgICBhZGRMaWtlZFNvbmcodGhpcy4kc3RvcmUuc3RhdGUuZmFuSWQsIHRoaXMuc29uZ0luZm8pCiAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7IG1lc3NhZ2U6ICLmlrDlop7miJDlip8iLCB0eXBlOiAic3VjY2VzcyIgfSk7CiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCJ1cGRhdGVTb25nIiwgdGhpcy5zb25nSW5mbyk7CiAgICAgICAgICAgICAgICB0aGlzLmNoaWxkQ2xvc2UoKTsKICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLmlrDlop7lpLHotKUhIik7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJlcnJvciBzdWJtaXQhISIpOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["Dialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Dialog.vue","sourceRoot":"src/views/fan/fan_heLikes/FanLikesSong","sourcesContent":["<template>\n  <div>\n    <!-- 修改弹窗 -->\n    <el-dialog\n      :visible.sync=\"dialogEditVisible.value\"\n      @close=\"childClose\"\n      width=\"30%\"\n    >\n      <el-form :model=\"songInfo\" ref=\"songInfo\" label-width=\"100px\">\n        <el-form-item label=\"歌曲名称\">\n          <el-input v-model=\"songInfo.SongName\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"作词人\">\n          <el-input v-model=\"songInfo.Lyricist\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"作曲人\">\n          <el-input v-model=\"songInfo.Composer\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"专辑ID\">\n          <el-input v-model.number=\"songInfo.AlbumID\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"歌曲代码\">\n          <el-input v-model=\"songInfo.SongCode\"></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"submitForm('songInfo')\"\n            >确认修改</el-button\n          >\n        </el-form-item>\n      </el-form>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { updateLikedSong, addLikedSong } from \"@/api/request\";\n\nexport default {\n  name: \"SongDialog\",\n  props: {\n    dialogEditVisible: {\n      type: Object,\n      default() {\n        return {};\n      },\n    },\n    songInfo: {\n      type: Object,\n      default() {\n        return {};\n      },\n    },\n  },\n  methods: {\n    childClose() {\n      this.dialogEditVisible.value = false;\n    },\n    // 提交表单\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          if (this.songInfo.SongID) {\n            // 更新喜欢的歌曲信息\n            updateLikedSong(this.$store.state.fanId, this.songInfo.SongID, this.songInfo)\n              .then(() => {\n                this.$message({ message: \"更新成功\", type: \"success\" });\n                this.$emit(\"updateSong\", this.songInfo);\n                this.childClose();\n              })\n              .catch((err) => {\n                this.$message.error(\"更新失败!\");\n              });\n          } else {\n            // 新增喜欢的歌曲\n            addLikedSong(this.$store.state.fanId, this.songInfo)\n              .then(() => {\n                this.$message({ message: \"新增成功\", type: \"success\" });\n                this.$emit(\"updateSong\", this.songInfo);\n                this.childClose();\n              })\n              .catch((err) => {\n                this.$message.error(\"新增失败!\");\n              });\n          }\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.el-form-item {\n  margin-bottom: 20px;\n}\n</style>"]}]}