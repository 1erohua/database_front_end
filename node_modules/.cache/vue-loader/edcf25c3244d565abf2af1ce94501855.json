{"remainingRequest":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/src/views/stuManage/components/Dialog.vue?vue&type=style&index=0&id=3cf39101&lang=scss&scoped=true&","dependencies":[{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/src/views/stuManage/components/Dialog.vue","mtime":1651133434000},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/css-loader/dist/cjs.js","mtime":1735892181739},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1735892182207},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/postcss-loader/src/index.js","mtime":1735892181895},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/sass-loader/dist/cjs.js","mtime":1735892181443},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/cache-loader/dist/cjs.js","mtime":1735892181475},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/vue-loader/lib/index.js","mtime":1735892182047}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5kaWFsb2ctc3R1IHsKICBtYXJnaW4tYm90dG9tOiAxMHB4OwogIGZvbnQtc2l6ZTogMTZweDsKICBzcGFuIHsKICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICB9CiAgLmRpYS1pdGVtIHsKICAgIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgfQogIC5kaWEtdGl0bGUgewogICAgbWFyZ2luLXJpZ2h0OiAxNXB4OwogICAgZm9udC13ZWlnaHQ6IDUwMDsKICAgIGNvbG9yOiAjOTA5Mzk5OwogIH0KfQouZGlhbG9nLXRhYmxlIHsKICBmb250LXNpemU6IDE0cHg7Cn0KLmRpYWxvZyAuZWwtZGlhbG9nX19ib2R5IHsKICBwYWRkaW5nOiAxMHB4IDIwcHg7Cn0K"},{"version":3,"sources":["Dialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Dialog.vue","sourceRoot":"src/views/stuManage/components","sourcesContent":["<template>\n  <div>\n    <el-dialog\n      title=\"违纪情况\"\n      :visible.sync=\"dialogTableVisible.value\"\n      @close=\"childClose1\"\n      align=\"center\"\n      width=\"25%\"\n    >\n      <div class=\"dialog-stu\">\n        <div class=\"dia-item\">\n          <span class=\"dia-title\">姓名</span>\n          <span>{{ punishData.name }}</span>\n        </div>\n        <div class=\"dia-item\">\n          <span class=\"dia-title\">学号</span>\n          <span>{{ punishData.studentid }}</span>\n        </div>\n      </div>\n      <el-table :data=\"punishData.punish\" class=\"dialog-table\">\n        <el-table-column\n          property=\"REC_TIME\"\n          label=\"日期\"\n          width=\"120\"\n        ></el-table-column>\n        <el-table-column\n          property=\"description\"\n          label=\"行为\"\n          width=\"80\"\n        ></el-table-column>\n        <el-table-column\n          property=\"DESCRIPTION\"\n          label=\"处罚\"\n          width=\"80\"\n        ></el-table-column>\n      </el-table>\n    </el-dialog>\n\n    <el-dialog\n      title=\"获奖情况\"\n      :visible.sync=\"dialogRewardVisible.value\"\n      @close=\"childClose2\"\n      align=\"center\"\n      width=\"30%\"\n    >\n      <div class=\"dialog-stu\">\n        <div class=\"dia-itemdia-title\">\n          <span class=\"dia-title\">姓名</span>\n          <span>{{ punishData.name }}</span>\n        </div>\n        <div class=\"dia-item\">\n          <span class=\"dia-title\">学号</span>\n          <span>{{ punishData.studentid }}</span>\n        </div>\n      </div>\n      <el-table :data=\"punishData.punish\" class=\"dialog-table\">\n        <el-table-column\n          property=\"REC_TIME\"\n          label=\"日期\"\n          width=\"120\"\n        ></el-table-column>\n        <el-table-column\n          property=\"description\"\n          label=\"获奖原因\"\n          width=\"120\"\n        ></el-table-column>\n        <el-table-column\n          property=\"DESCRIPTION\"\n          label=\"奖励\"\n          width=\"120\"\n        ></el-table-column>\n      </el-table>\n    </el-dialog>\n\n    <!-- 修改弹窗 -->\n    <el-dialog\n      :visible.sync=\"dialogEditVisible.value\"\n      @close=\"childClose3\"\n      @open=\"stuBaseDialogOpen\"\n      width=\"25%\"\n    >\n      <el-form :model=\"stuBaseInfo\" ref=\"stuBaseInfo\" label-width=\"80px\">\n        <el-form-item\n          label=\"学号\"\n          :rules=\"[\n            { required: true, message: '请输入学号', trigger: 'blur' },\n            {\n              type: 'number',\n              message: '请输入正确的学号',\n              trigger: ['blur', 'change'],\n            },\n          ]\"\n        >\n          <el-input v-model.number=\"stuBaseInfo.studentid\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"姓名\">\n          <el-input v-model=\"stuBaseInfo.name\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"性别\" prop=\"resource\">\n          <el-radio-group v-model=\"stuBaseInfo.sex\">\n            <el-radio label=\"男\">男</el-radio>\n            <el-radio label=\"女\">女</el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item label=\"学院\">\n          <el-select\n            v-model=\"stuBaseInfo.xueyuan\"\n            @visible-change=\"changeXueyuan\"\n            placeholder=\"请选择\"\n          >\n            <el-option\n              v-for=\"(item, index) in xueyuanOptions\"\n              :key=\"index\"\n              :label=\"item\"\n              :value=\"item\"\n            >\n            </el-option>\n          </el-select>\n          <!-- <el-input v-model=\"stuBaseInfo.xueyuan\"></el-input> -->\n        </el-form-item>\n\n        <el-form-item label=\"班级\">\n          <el-select\n            v-model=\"stuBaseInfo.classname\"\n            @visible-change=\"changeClass\"\n            placeholder=\"请选择\"\n          >\n            <el-option\n              v-for=\"(item, index) in classOptions\"\n              :key=\"index\"\n              :label=\"item\"\n              :value=\"item\"\n            >\n            </el-option>\n          </el-select>\n          <!-- <el-input v-model=\"stuBaseInfo.classname\"></el-input> -->\n        </el-form-item>\n        <el-form-item label=\"生日\">\n          <el-date-picker\n            v-model=\"stuBaseInfo.birthday\"\n            format=\"MM-dd\"\n            placeholder=\"选择日期\"\n          >\n          </el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"违纪情况\">\n          <el-input :disabled=\"true\" value=\"暂不支持修改\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"获奖情况\">\n          <el-input :disabled=\"true\" value=\"暂不支持修改\"></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"submitForm('stuBaseInfo')\"\n            >确认修改</el-button\n          >\n        </el-form-item>\n      </el-form>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { isExit, updateStuInfo } from \"@/api/request\";\nexport default {\n  name: \"Dialog\",\n  data() {\n    return {\n      xueyuanOptions: [\n        \"计算机科学与工程学院\",\n        \"艺术学院\",\n        \"外国语学院\",\n        \"信息与电气工程学院\",\n        \"化学化工学院\",\n      ],\n      classOptions: [],\n      stuBaseInfo: {},\n    };\n  },\n  props: {\n    dialogTableVisible: {\n      type: Object,\n      default() {\n        return {};\n      },\n    },\n    dialogRewardVisible: {\n      type: Object,\n      default() {\n        return {};\n      },\n    },\n    dialogEditVisible: {\n      type: Object,\n      default() {\n        return {};\n      },\n    },\n    // 获奖，惩罚信息\n    punishData: {\n      type: Object,\n      default() {\n        return [];\n      },\n    },\n    //  修改学生基本信息\n    stuBaseInfo1: {\n      type: Object,\n      default() {\n        return {};\n      },\n    },\n  },\n  mounted() {},\n\n  methods: {\n    childClose1() {\n      this.dialogTableVisible.value = false;\n    },\n    childClose2() {\n      this.dialogRewardVisible.value = false;\n    },\n    childClose3() {\n      this.dialogEditVisible.value = false;\n    },\n    handleClose(done) {\n      this.$confirm(\"确认关闭？\")\n        .then(() => {\n          done();\n        })\n        .catch(() => {});\n    },\n    // 更改学院时,返回二级专业班级选择框\n    changeXueyuan() {\n      if (this.stuBaseInfo.xueyuan === \"计算机科学与工程学院\") {\n        this.classOptions = [\"计算机科学与技术\", \"网络工程\", \"信息安全\"];\n      } else if (this.stuBaseInfo.xueyuan === \"艺术学院\") {\n        this.classOptions = [\"音乐与舞蹈学\", \"美术学\", \"设计学\"];\n      } else if (this.stuBaseInfo.xueyuan === \"外国语学院\") {\n        this.classOptions = [\"汉语国际教育\", \"日语\", \"翻译\"];\n      } else if (this.stuBaseInfo.xueyuan === \"信息与电气工程学院\") {\n        this.classOptions = [\"电气工程及其自动化\", \"电子信息工程\", \"通信工程\"];\n      } else {\n        this.classOptions = [\"应用化学\", \"化学工程与工艺\", \"环境工程\"];\n      }\n      // 并将专业班级切换成所属学院\n      this.stuBaseInfo.classname = this.classOptions[0];\n    },\n    // 修改班级\n    changeClass() {\n      if (this.stuBaseInfo.xueyuan === \"计算机科学与工程学院\") {\n        this.classOptions = [\"计算机科学与技术\", \"网络工程\", \"信息安全\"];\n      } else if (this.stuBaseInfo.xueyuan === \"艺术学院\") {\n        this.classOptions = [\"音乐与舞蹈学\", \"美术学\", \"设计学\"];\n      } else if (this.stuBaseInfo.xueyuan === \"外国语学院\") {\n        this.classOptions = [\"汉语国际教育\", \"日语\", \"翻译\"];\n      } else if (this.stuBaseInfo.xueyuan === \"信息与电气工程学院\") {\n        this.classOptions = [\"电气工程及其自动化\", \"电子信息工程\", \"通信工程\"];\n      } else {\n        this.classOptions = [\"应用化学\", \"化学工程与工艺\", \"环境工程\"];\n      }\n    },\n    // 提交修改\n    submitForm(formName) {\n      this.$refs[formName].validate(async (valid) => {\n        if (valid) {\n          // 判断学号是否 修改\n          // 1. 未修改\n          if (this.stuBaseInfo1.studentid === this.stuBaseInfo.studentid) {\n            // 提交修改\n            updateStuInfo(this.stuBaseInfo)\n              .then((res) => {\n                this.$message({ message: \"修改成功\", type: \"success\" });\n                this.childClose3();\n                return true;\n              })\n              .catch((err) => {\n                this.$message.error(\"修改失败!\");\n                this.childClose3();\n                return true;\n              });\n          }\n          // 2. 修改\n          else {\n            // 请求 判断学号是否已经在数据库存在\n            let stuidExit = await isExit(this.stuBaseInfo.studentid);\n            //\n            if (stuidExit.data.length !== 0) {\n              // console.log(\"error submit!!学号已经存在\");\n              this.$message({\n                message: \"该学号在数据库中已存在\",\n                type: \"warning\",\n              });\n              return false;\n            } else {\n              updateStuInfo(this.stuBaseInfo)\n                .then((res) => {\n                  this.$message({ message: \"修改成功\", type: \"success\" });\n                  this.childClose3();\n                  return true;\n                })\n                .catch((err) => {\n                  this.$message.error(\"修改失败!\");\n                  this.childClose3();\n                  return true;\n                });\n            }\n          }\n          // console.log(this.stuBaseInfo);\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n\n    // 弹窗被打开\n    stuBaseDialogOpen() {\n      this.stuBaseInfo = Object.assign({}, this.stuBaseInfo1);\n    },\n\n    /**\n     * 请求部分\n     */\n    // 判断是否存在学号\n    checkStuid(stuid) {\n      isExit(stuid).then((res) => {\n        if (res.data.length == 0) {\n          return false;\n        } else {\n          return true;\n        }\n      });\n    },\n  },\n};\n</script>\n<style lang='scss' scoped>\n.dialog-stu {\n  margin-bottom: 10px;\n  font-size: 16px;\n  span {\n    display: inline-block;\n  }\n  .dia-item {\n    margin-bottom: 10px;\n  }\n  .dia-title {\n    margin-right: 15px;\n    font-weight: 500;\n    color: #909399;\n  }\n}\n.dialog-table {\n  font-size: 14px;\n}\n.dialog .el-dialog__body {\n  padding: 10px 20px;\n}\n</style>"]}]}