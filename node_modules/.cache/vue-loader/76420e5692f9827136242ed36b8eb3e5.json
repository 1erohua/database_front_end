{"remainingRequest":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/src/views/stuStatus/components/StatusDetail.vue?vue&type=style&index=0&id=2001d569&lang=scss&scoped=true&","dependencies":[{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/src/views/stuStatus/components/StatusDetail.vue","mtime":1651133434000},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/css-loader/dist/cjs.js","mtime":1735892181739},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1735892182207},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/postcss-loader/src/index.js","mtime":1735892181895},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/sass-loader/dist/cjs.js","mtime":1735892181443},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/cache-loader/dist/cjs.js","mtime":1735892181475},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/vue-loader/lib/index.js","mtime":1735892182047}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnBhZ2luYXRpb24gewogIHRleHQtYWxpZ246IGNlbnRlcjsKICBtYXJnaW4tdG9wOiAxNXB4Owp9Ci5uYW1lLXdyYXBwZXIgewogIC5lbC10YWcgewogICAgY3Vyc29yOiBwb2ludGVyOwogIH0KfQo="},{"version":3,"sources":["StatusDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"StatusDetail.vue","sourceRoot":"src/views/stuStatus/components","sourcesContent":["<template>\n  <div class=\"status-detail\">\n    <el-table :data=\"tableData\" border class=\"container_wrap\">\n      <el-table-column type=\"selection\" width=\"55\"> </el-table-column>\n      <el-table-column prop=\"studentid\" label=\"学号\" width=\"150\">\n      </el-table-column>\n      <el-table-column prop=\"name\" label=\"姓名\" width=\"80\"> </el-table-column>\n      <el-table-column prop=\"sex\" label=\"性别\" width=\"80\" align=\"center\">\n      </el-table-column>\n      <el-table-column prop=\"xueyuan\" label=\"学院\" width=\"180\">\n      </el-table-column>\n      <el-table-column prop=\"classname\" label=\"班级\" width=\"180\">\n      </el-table-column>\n      <el-table-column prop=\"birthday\" label=\"生日\" width=\"80\">\n      </el-table-column>\n      <el-table-column prop=\"native_place\" width=\"80\" label=\"籍贯\">\n      </el-table-column>\n      <el-table-column prop=\"stu_status\" width=\"180\" label=\"学籍变更原由\">\n      </el-table-column>\n      <el-table-column\n        prop=\"change_time\"\n        :formatter=\"dateFormat\"\n        width=\"180\"\n        label=\"学籍变更时间\"\n      >\n      </el-table-column>\n    </el-table>\n\n    <div class=\"pagination\">\n      <Pagination\n        :pageCount=\"pagiDataAll\"\n        @cpnPageJumpTo=\"currentChange\"\n      ></Pagination>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Pagination from \"@/components/pagination\";\nimport {\n  selectStuName,\n  selectStuid,\n  selectReward,\n  selectPunish,\n  selectallstudentstatus,\n} from \"@/api/request\";\n\nexport default {\n  name: \"StatusDetail\",\n  components: {\n    Pagination,\n  },\n  created() {\n    // 获取第0页学生信息\n    this.getStudentMes();\n  },\n  data() {\n    return {\n      tableData: [],\n      pagiDataAll: 0,\n      // 设置flg，stu表示数据来源当前页面，name表示来自子组件searchname\n      currentpage: \"stu\",\n      searchName: \"\",\n      // 弹窗\n      dialogTableVisible: { value: false },\n      dialogRewardVisible: { value: false },\n      dialogEditVisible: { value: false },\n      // punishData\n      punishData: {},\n      // 当前行学生信息\n      stuBaseInfo: {},\n    };\n  },\n\n  mounted() {\n    // console.log(this.tableData);\n  },\n  computed: {\n    getpagiDataAll() {\n      return this.pagiDataAll;\n    },\n  },\n  methods: {\n    handleDelete(index, row) {\n      console.log(index, row);\n    },\n\n    /**\n     * 数据请求\n     */\n    // 1.获取学生信息和学籍信息\n    getStudentMes(page = 0) {\n      // 请求\n      selectallstudentstatus(page).then((res) => {\n        this.pagiDataAll = res.data.pageAll;\n        // console.log(res);\n        let result = res.data.data;\n\n        // 过滤属性值为null的\n        // this.resFilter(result);\n        // 清空数组\n        this.tableData.splice(0);\n        this.tableData.push(...result);\n      });\n    },\n    // 2.请求搜索name\n    getselectStuName(name, page = 0) {\n      selectStuName(name, page).then((res) => {\n        this.pagiDataAll = res.data.pageAll;\n        console.log(res);\n        let result = res.data.data;\n\n        // 清空数组\n        this.tableData.splice(0);\n        this.tableData.push(...result);\n      });\n    },\n    // 3.请求搜索id\n    getselectStuid(stuid, page = 0) {\n      selectStuid(stuid, page).then((res) => {\n        this.pagiDataAll = res.data.pageAll;\n        // console.log(res);\n        let result = res.data.data;\n\n        // 清空数组\n        this.tableData.splice(0);\n        this.tableData.push(...result);\n      });\n    },\n    // 4.请求查看违纪\n    getSelectPunish(stuid) {\n      selectPunish(stuid).then((res, err) => {\n        console.log(res);\n        return res.data;\n      });\n    },\n    /**\n     * 操作\n     */\n    // 对表格数据的日期进行格式化\n    dateFormat(row, column) {\n      const daterc = row[column.property];\n      const timeFormat = daterc.split('T')[0]\n      return timeFormat;\n    },\n    // 分页跳转，获取学生信息\n    currentChange(item) {\n      // stu页面\n      if (this.currentpage === \"stu\") {\n        this.getStudentMes(item - 1);\n      }\n      if (this.currentpage === \"name\") {\n        this.getselectStuName(this.searchName, item - 1);\n      }\n      if (this.currentpage === \"studentid\") {\n        this.getselectStuid(this.searchName, item - 1);\n      }\n    },\n    // 获取search组件发送的要查找数据\n    getSearchData(searchData) {\n      console.log(searchData);\n      this.searchName = searchData.content;\n      // 修改页面flg\n      this.currentpage = searchData.type;\n      // 修改此页内容\n      // 1.姓名查询\n      if (this.currentpage === \"name\") {\n        this.getselectStuName(this.searchName);\n      }\n      // 2.学号查询\n      else {\n        this.getselectStuid(this.searchName);\n      }\n    },\n    // 1.弹窗处罚\n    async seeDetails(index, row) {\n      // console.log(index,row);\n      // 查询违纪\n      let stuid = index.studentid;\n      // 请求查询处罚\n      let punishResult = await selectPunish(stuid);\n      console.log(punishResult.data);\n      this.punishData.studentid = stuid;\n      this.punishData.name = index.name;\n      this.punishData.punish = [];\n      this.punishData.punish.push(...punishResult.data);\n      // 处理时间\n      this.punishData.punish.forEach((element) => {\n        element.REC_TIME = element.REC_TIME.split(\"T\")[0];\n      });\n      console.log(this.punishData);\n      this.dialogTableVisible.value = true;\n    },\n    // 2.弹窗奖励\n    async seeDetailsReward(index, row) {\n      // console.log(index,row);\n      // 查询违纪\n      let stuid = index.studentid;\n      // 请求查询奖励\n      let punishResult = await selectReward(stuid);\n      console.log(punishResult.data);\n      this.punishData.studentid = stuid;\n      this.punishData.name = index.name;\n      this.punishData.punish = [];\n      this.punishData.punish.push(...punishResult.data);\n      // 处理时间\n      this.punishData.punish.forEach((element) => {\n        element.REC_TIME = element.REC_TIME.split(\"T\")[0];\n      });\n      console.log(this.punishData);\n      this.dialogRewardVisible.value = true;\n    },\n    // 3.弹窗修改\n    handleEdit(index, row) {\n      console.log(row);\n      this.stuBaseInfo = row;\n      this.dialogEditVisible.value = true;\n    },\n    handleJoinPeople(row, id) {\n      console.log(row.ac_id);\n    },\n    handleCard(row, id) {\n      console.log(row.ac_id);\n    },\n  },\n};\n</script>\n<style lang='scss' scoped>\n.pagination {\n  text-align: center;\n  margin-top: 15px;\n}\n.name-wrapper {\n  .el-tag {\n    cursor: pointer;\n  }\n}\n</style>"]}]}