{"remainingRequest":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/src/views/fan/fan_un/fan_un.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/src/views/fan/fan_un/fan_un.vue","mtime":1735991539484},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/cache-loader/dist/cjs.js","mtime":1735892181475},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/babel-loader/lib/index.js","mtime":1735892181655},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/cache-loader/dist/cjs.js","mtime":1735892181475},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/vue-loader/lib/index.js","mtime":1735892182047}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgZ2V0VW5mb2xsb3dlZEJhbmRzLAogIGdldFVuZm9sbG93ZWRBbGJ1bXMsCiAgZ2V0VW5mb2xsb3dlZFNvbmdzLAogIGdldFVuYXR0ZW5kZWRDb25jZXJ0cywKICBhZGRMaWtlZEJhbmQsCiAgYWRkTGlrZWRBbGJ1bSwKICBhZGRMaWtlZFNvbmcsCiAgYWRkQXR0ZW5kZWRDb25jZXJ0LAp9IGZyb20gIkAvYXBpL3JlcXVlc3QiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJGYW5IZUxpa2VzIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdW5mb2xsb3dlZEJhbmRzOiBbXSwKICAgICAgdW5mb2xsb3dlZEFsYnVtczogW10sCiAgICAgIHVuZm9sbG93ZWRTb25nczogW10sCiAgICAgIHVuYXR0ZW5kZWRDb25jZXJ0czogW10sCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGZhbklkKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZmFuSWQ7CiAgICB9LAogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0VW5mb2xsb3dlZERhdGEoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOiOt+WPluaJgOacieacquWFs+azqOeahOaVsOaNrgogICAgZ2V0VW5mb2xsb3dlZERhdGEoKSB7CiAgICAgIGdldFVuZm9sbG93ZWRCYW5kcyh0aGlzLmZhbklkKS50aGVuKChyZXMpID0+IHsKICAgICAgICB0aGlzLnVuZm9sbG93ZWRCYW5kcyA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgICAgZ2V0VW5mb2xsb3dlZEFsYnVtcyh0aGlzLmZhbklkKS50aGVuKChyZXMpID0+IHsKICAgICAgICB0aGlzLnVuZm9sbG93ZWRBbGJ1bXMgPSByZXMuZGF0YTsKICAgICAgfSk7CiAgICAgIGdldFVuZm9sbG93ZWRTb25ncyh0aGlzLmZhbklkKS50aGVuKChyZXMpID0+IHsKICAgICAgICB0aGlzLnVuZm9sbG93ZWRTb25ncyA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgICAgZ2V0VW5hdHRlbmRlZENvbmNlcnRzKHRoaXMuZmFuSWQpLnRoZW4oKHJlcykgPT4gewogICAgICAgIHRoaXMudW5hdHRlbmRlZENvbmNlcnRzID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWIt+aWsOWIl+ihqAogICAgcmVmcmVzaChldmVudCkgewogICAgICB0aGlzLmxvc3RCbHVyKGV2ZW50KTsKICAgICAgdGhpcy5nZXRVbmZvbGxvd2VkRGF0YSgpOwogICAgfSwKICAgIC8vIOWFs+azqOS5kOmYnwogICAgZm9sbG93QmFuZChiYW5kSWQpIHsKICAgICAgYWRkTGlrZWRCYW5kKHRoaXMuZmFuSWQsIGJhbmRJZCkudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7IHR5cGU6ICJzdWNjZXNzIiwgbWVzc2FnZTogIuWFs+azqOaIkOWKnyEiIH0pOwogICAgICAgIHRoaXMuZ2V0VW5mb2xsb3dlZERhdGEoKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5YWz5rOo5LiT6L6RCiAgICBmb2xsb3dBbGJ1bShhbGJ1bUlkKSB7CiAgICAgIGFkZExpa2VkQWxidW0odGhpcy5mYW5JZCwgYWxidW1JZCkudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7IHR5cGU6ICJzdWNjZXNzIiwgbWVzc2FnZTogIuWFs+azqOaIkOWKnyEiIH0pOwogICAgICAgIHRoaXMuZ2V0VW5mb2xsb3dlZERhdGEoKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5YWz5rOo5q2M5puyCiAgICBmb2xsb3dTb25nKHNvbmdJZCkgewogICAgICBhZGRMaWtlZFNvbmcodGhpcy5mYW5JZCwgc29uZ0lkKS50aGVuKCgpID0+IHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsgdHlwZTogInN1Y2Nlc3MiLCBtZXNzYWdlOiAi5YWz5rOo5oiQ5YqfISIgfSk7CiAgICAgICAgdGhpcy5nZXRVbmZvbGxvd2VkRGF0YSgpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDlj4LliqDmvJTllLHkvJoKICAgIGF0dGVuZENvbmNlcnQoY29uY2VydElkKSB7CiAgICAgIGFkZEF0dGVuZGVkQ29uY2VydCh0aGlzLmZhbklkLCBjb25jZXJ0SWQpLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMuJG1lc3NhZ2UoeyB0eXBlOiAic3VjY2VzcyIsIG1lc3NhZ2U6ICLlj4LliqDmiJDlip8hIiB9KTsKICAgICAgICB0aGlzLmdldFVuZm9sbG93ZWREYXRhKCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWkseeEpuWkhOeQhgogICAgbG9zdEJsdXIoZXZlbnQpIHsKICAgICAgbGV0IHRhcmdldCA9IGV2ZW50LnRhcmdldDsKICAgICAgaWYgKHRhcmdldC5ub2RlTmFtZSA9PSAiU1BBTiIpIHsKICAgICAgICB0YXJnZXQgPSBldmVudC50YXJnZXQucGFyZW50Tm9kZTsKICAgICAgfQogICAgICB0YXJnZXQuYmx1cigpOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["fan_un.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"fan_un.vue","sourceRoot":"src/views/fan/fan_un","sourcesContent":["<template>\n  <div class=\"fan-likes\">\n    <div class=\"container_wrap\">\n      <div class=\"batchOption\">\n        <el-button icon=\"el-icon-refresh\" type=\"warning\" @click=\"refresh($event)\"\n          >刷新列表</el-button\n        >\n      </div>\n\n      <!-- 未关注的乐队 -->\n      <el-table :data=\"unfollowedBands\" border class=\"table\">\n        <el-table-column prop=\"BandName\" label=\"乐队名称\" width=\"150\">\n        </el-table-column>\n        <el-table-column prop=\"FormationDate\" label=\"成立日期\" width=\"150\">\n        </el-table-column>\n        <el-table-column prop=\"BandDescription\" label=\"乐队描述\" width=\"200\">\n        </el-table-column>\n        <el-table-column label=\"操作\">\n          <template slot-scope=\"scope\">\n            <el-button\n              size=\"mini\"\n              type=\"primary\"\n              icon=\"el-icon-plus\"\n              @click=\"followBand(scope.row.BandID)\"\n              >关注</el-button\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <!-- 未关注的专辑 -->\n      <el-table :data=\"unfollowedAlbums\" border class=\"table\">\n        <el-table-column prop=\"AlbumName\" label=\"专辑名称\" width=\"150\">\n        </el-table-column>\n        <el-table-column prop=\"ReleaseDate\" label=\"发行日期\" width=\"150\">\n        </el-table-column>\n        <el-table-column prop=\"AlbumDescription\" label=\"专辑描述\" width=\"200\">\n        </el-table-column>\n        <el-table-column label=\"操作\">\n          <template slot-scope=\"scope\">\n            <el-button\n              size=\"mini\"\n              type=\"primary\"\n              icon=\"el-icon-plus\"\n              @click=\"followAlbum(scope.row.AlbumID)\"\n              >关注</el-button\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <!-- 未关注的歌曲 -->\n      <el-table :data=\"unfollowedSongs\" border class=\"table\">\n        <el-table-column prop=\"SongName\" label=\"歌曲名称\" width=\"150\">\n        </el-table-column>\n        <el-table-column prop=\"Lyricist\" label=\"作词人\" width=\"150\">\n        </el-table-column>\n        <el-table-column prop=\"Composer\" label=\"作曲人\" width=\"150\">\n        </el-table-column>\n        <el-table-column label=\"操作\">\n          <template slot-scope=\"scope\">\n            <el-button\n              size=\"mini\"\n              type=\"primary\"\n              icon=\"el-icon-plus\"\n              @click=\"followSong(scope.row.SongID)\"\n              >关注</el-button\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <!-- 未参加的演唱会 -->\n      <el-table :data=\"unattendedConcerts\" border class=\"table\">\n        <el-table-column prop=\"ConcertName\" label=\"演唱会名称\" width=\"150\">\n        </el-table-column>\n        <el-table-column prop=\"ConcertDate\" label=\"演唱会日期\" width=\"150\">\n        </el-table-column>\n        <el-table-column prop=\"Location\" label=\"地点\" width=\"150\">\n        </el-table-column>\n        <el-table-column label=\"操作\">\n          <template slot-scope=\"scope\">\n            <el-button\n              size=\"mini\"\n              type=\"primary\"\n              icon=\"el-icon-plus\"\n              @click=\"attendConcert(scope.row.ConcertID)\"\n              >参加</el-button\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {\n  getUnfollowedBands,\n  getUnfollowedAlbums,\n  getUnfollowedSongs,\n  getUnattendedConcerts,\n  addLikedBand,\n  addLikedAlbum,\n  addLikedSong,\n  addAttendedConcert,\n} from \"@/api/request\";\n\nexport default {\n  name: \"FanHeLikes\",\n  data() {\n    return {\n      unfollowedBands: [],\n      unfollowedAlbums: [],\n      unfollowedSongs: [],\n      unattendedConcerts: [],\n    };\n  },\n  computed: {\n    fanId() {\n      return this.$store.state.fanId;\n    },\n  },\n  created() {\n    this.getUnfollowedData();\n  },\n  methods: {\n    // 获取所有未关注的数据\n    getUnfollowedData() {\n      getUnfollowedBands(this.fanId).then((res) => {\n        this.unfollowedBands = res.data;\n      });\n      getUnfollowedAlbums(this.fanId).then((res) => {\n        this.unfollowedAlbums = res.data;\n      });\n      getUnfollowedSongs(this.fanId).then((res) => {\n        this.unfollowedSongs = res.data;\n      });\n      getUnattendedConcerts(this.fanId).then((res) => {\n        this.unattendedConcerts = res.data;\n      });\n    },\n    // 刷新列表\n    refresh(event) {\n      this.lostBlur(event);\n      this.getUnfollowedData();\n    },\n    // 关注乐队\n    followBand(bandId) {\n      addLikedBand(this.fanId, bandId).then(() => {\n        this.$message({ type: \"success\", message: \"关注成功!\" });\n        this.getUnfollowedData();\n      });\n    },\n    // 关注专辑\n    followAlbum(albumId) {\n      addLikedAlbum(this.fanId, albumId).then(() => {\n        this.$message({ type: \"success\", message: \"关注成功!\" });\n        this.getUnfollowedData();\n      });\n    },\n    // 关注歌曲\n    followSong(songId) {\n      addLikedSong(this.fanId, songId).then(() => {\n        this.$message({ type: \"success\", message: \"关注成功!\" });\n        this.getUnfollowedData();\n      });\n    },\n    // 参加演唱会\n    attendConcert(concertId) {\n      addAttendedConcert(this.fanId, concertId).then(() => {\n        this.$message({ type: \"success\", message: \"参加成功!\" });\n        this.getUnfollowedData();\n      });\n    },\n    // 失焦处理\n    lostBlur(event) {\n      let target = event.target;\n      if (target.nodeName == \"SPAN\") {\n        target = event.target.parentNode;\n      }\n      target.blur();\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.fan-likes {\n  .batchOption {\n    margin-bottom: 5px;\n    .el-button {\n      font-size: 10px;\n      padding: 5px;\n    }\n  }\n  .table {\n    margin-bottom: 20px;\n  }\n}\n</style>"]}]}