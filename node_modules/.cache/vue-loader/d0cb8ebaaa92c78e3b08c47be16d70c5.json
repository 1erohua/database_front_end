{"remainingRequest":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/src/views/band/band_member/Dialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/src/views/band/band_member/Dialog.vue","mtime":1736426887429},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/cache-loader/dist/cjs.js","mtime":1735892181475},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/babel-loader/lib/index.js","mtime":1735892181655},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/cache-loader/dist/cjs.js","mtime":1735892181475},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/vue-loader/lib/index.js","mtime":1735892182047}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHVwZGF0ZUJhbmRNZW1iZXIsIGFkZEJhbmRNZW1iZXIgfSBmcm9tICJAL2FwaS9yZXF1ZXN0IjsKaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJNZW1iZXJEaWFsb2ciLAogIHByb3BzOiB7CiAgICBkaWFsb2dFZGl0VmlzaWJsZTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9LAogICAgfSwKICAgIG1lbWJlckluZm86IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiB7fTsKICAgICAgfSwKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICBjaGlsZENsb3NlKCkgewogICAgICB0aGlzLmRpYWxvZ0VkaXRWaXNpYmxlLnZhbHVlID0gZmFsc2U7CiAgICB9LAogICAgLy8g5o+Q5Lqk6KGo5Y2VCiAgICBzdWJtaXRGb3JtKGZvcm1OYW1lKSB7CiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgaWYgKHRoaXMubWVtYmVySW5mby5NZW1iZXJJRCkgewogICAgICAgICAgICAvLyDmm7TmlrDkuZDpmJ/miJDlkZjkv6Hmga8KICAgICAgICAgICAgdXBkYXRlQmFuZE1lbWJlcih0aGlzLiRzdG9yZS5zdGF0ZS5iYW5kSWQsIHRoaXMubWVtYmVySW5mby5NZW1iZXJJRCwgdGhpcy5tZW1iZXJJbmZvKQogICAgICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoeyBtZXNzYWdlOiAi5pu05paw5oiQ5YqfIiwgdHlwZTogInN1Y2Nlc3MiIH0pOwogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgidXBkYXRlTWVtYmVyIiwgdGhpcy5tZW1iZXJJbmZvKTsKICAgICAgICAgICAgICAgIHRoaXMuY2hpbGRDbG9zZSgpOwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuabtOaWsOWksei0pSEiKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIOaWsOWinuS5kOmYn+aIkOWRmAogICAgICAgICAgICBhZGRCYW5kTWVtYmVyKHRoaXMuJHN0b3JlLnN0YXRlLmJhbmRJZCwgdGhpcy5tZW1iZXJJbmZvKQogICAgICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoeyBtZXNzYWdlOiAi5paw5aKe5oiQ5YqfIiwgdHlwZTogInN1Y2Nlc3MiIH0pOwogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgidXBkYXRlTWVtYmVyIiwgdGhpcy5tZW1iZXJJbmZvKTsKICAgICAgICAgICAgICAgIHRoaXMuY2hpbGRDbG9zZSgpOwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuaWsOWinuWksei0pSEiKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2coImVycm9yIHN1Ym1pdCEhIik7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["Dialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Dialog.vue","sourceRoot":"src/views/band/band_member","sourcesContent":["<template>\n  <div>\n    <!-- 修改弹窗 -->\n    <el-dialog\n      :visible.sync=\"dialogEditVisible.value\"\n      @close=\"childClose\"\n      width=\"30%\"\n    >\n      <el-form :model=\"memberInfo\" ref=\"memberInfo\" label-width=\"100px\">\n        <el-form-item label=\"成员名称\">\n          <el-input v-model=\"memberInfo.Name\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"性别\">\n          <el-select v-model=\"memberInfo.Gender\" placeholder=\"请选择性别\">\n            <el-option label=\"男\" value=\"Male\"></el-option>\n            <el-option label=\"女\" value=\"Female\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"年龄\">\n          <el-input v-model.number=\"memberInfo.Age\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"角色\">\n          <el-input v-model=\"memberInfo.Role\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"加入日期\">\n          <el-date-picker\n            v-model=\"memberInfo.JoinDate\"\n            type=\"datetime\"\n            placeholder=\"选择日期\"\n            format=\"yyyy-MM-dd HH:mm:ss\"\n            value-format=\"yyyy-MM-dd HH:mm:ss\"\n          ></el-date-picker>\n        </el-form-item>\n        <el-form-item v-if=\"false\" label=\"离开日期\">\n          <el-date-picker\n            v-model=\"memberInfo.LeaveDate\"\n            type=\"datetime\"\n            placeholder=\"选择日期\"\n            format=\"yyyy-MM-dd HH:mm:ss\"\n            value-format=\"yyyy-MM-dd HH:mm:ss\"\n          ></el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"成员代码\">\n          <el-input v-model=\"memberInfo.MemberCode\"></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"submitForm('memberInfo')\"\n            >确认修改</el-button\n          >\n        </el-form-item>\n      </el-form>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { updateBandMember, addBandMember } from \"@/api/request\";\nimport moment from \"moment\";\n\nexport default {\n  name: \"MemberDialog\",\n  props: {\n    dialogEditVisible: {\n      type: Object,\n      default() {\n        return {};\n      },\n    },\n    memberInfo: {\n      type: Object,\n      default() {\n        return {};\n      },\n    },\n  },\n  methods: {\n    childClose() {\n      this.dialogEditVisible.value = false;\n    },\n    // 提交表单\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          if (this.memberInfo.MemberID) {\n            // 更新乐队成员信息\n            updateBandMember(this.$store.state.bandId, this.memberInfo.MemberID, this.memberInfo)\n              .then(() => {\n                this.$message({ message: \"更新成功\", type: \"success\" });\n                this.$emit(\"updateMember\", this.memberInfo);\n                this.childClose();\n              })\n              .catch((err) => {\n                this.$message.error(\"更新失败!\");\n              });\n          } else {\n            // 新增乐队成员\n            addBandMember(this.$store.state.bandId, this.memberInfo)\n              .then(() => {\n                this.$message({ message: \"新增成功\", type: \"success\" });\n                this.$emit(\"updateMember\", this.memberInfo);\n                this.childClose();\n              })\n              .catch((err) => {\n                this.$message.error(\"新增失败!\");\n              });\n          }\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.el-form-item {\n  margin-bottom: 20px;\n}\n</style>"]}]}