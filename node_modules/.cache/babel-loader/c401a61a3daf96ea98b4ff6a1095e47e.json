{"remainingRequest":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/babel-loader/lib/index.js!/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/src/views/band/band_album/Dialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/src/views/band/band_album/Dialog.vue","mtime":1736428135632},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/cache-loader/dist/cjs.js","mtime":1735892181475},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/babel-loader/lib/index.js","mtime":1735892181655},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/cache-loader/dist/cjs.js","mtime":1735892181475},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/vue-loader/lib/index.js","mtime":1735892182047}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgdXBkYXRlQmFuZEFsYnVtLCBjcmVhdGVCYW5kQWxidW0gfSBmcm9tICJAL2FwaS9yZXF1ZXN0IjsKaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFsYnVtRGlhbG9nIiwKICBwcm9wczogewogICAgZGlhbG9nRWRpdFZpc2libGU6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4ge307CiAgICAgIH0KICAgIH0sCiAgICBhbGJ1bUluZm86IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4ge307CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGNoaWxkQ2xvc2U6IGZ1bmN0aW9uIGNoaWxkQ2xvc2UoKSB7CiAgICAgIHRoaXMuZGlhbG9nRWRpdFZpc2libGUudmFsdWUgPSBmYWxzZTsKICAgIH0sCiAgICAvLyDmj5DkuqTooajljZUKICAgIHN1Ym1pdEZvcm06IGZ1bmN0aW9uIHN1Ym1pdEZvcm0oZm9ybU5hbWUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgdmFyIGJhbmRJZCA9IF90aGlzLiRzdG9yZS5zdGF0ZS5iYW5kSWQ7CgogICAgICAgICAgaWYgKF90aGlzLmFsYnVtSW5mby5BbGJ1bUlEKSB7CiAgICAgICAgICAgIC8vIOabtOaWsOS4k+i+keS/oeaBrwogICAgICAgICAgICB1cGRhdGVCYW5kQWxidW0oYmFuZElkLCBfdGhpcy5hbGJ1bUluZm8uQWxidW1JRCwgX3RoaXMuYWxidW1JbmZvKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBfdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICBtZXNzYWdlOiAi5pu05paw5oiQ5YqfIiwKICAgICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIgogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBfdGhpcy4kZW1pdCgidXBkYXRlQWxidW0iLCBfdGhpcy5hbGJ1bUluZm8pOwoKICAgICAgICAgICAgICBfdGhpcy5jaGlsZENsb3NlKCk7CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcigi5pu05paw5aSx6LSlISIpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIOaWsOWinuS4k+i+kQogICAgICAgICAgICBjcmVhdGVCYW5kQWxidW0oYmFuZElkLCBfdGhpcy5hbGJ1bUluZm8pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLmlrDlop7miJDlip8iLAogICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIF90aGlzLiRlbWl0KCJ1cGRhdGVBbGJ1bSIsIF90aGlzLmFsYnVtSW5mbyk7CgogICAgICAgICAgICAgIF90aGlzLmNoaWxkQ2xvc2UoKTsKICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlLmVycm9yKCLmlrDlop7lpLHotKUhIik7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiZXJyb3Igc3VibWl0ISEiKTsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Dialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA,SAAA,eAAA,EAAA,eAAA,QAAA,eAAA;AACA,OAAA,MAAA,MAAA,QAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,iBAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAFA,sBAEA;AACA,eAAA,EAAA;AACA;AAJA,KADA;AAOA,IAAA,SAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAFA,sBAEA;AACA,eAAA,EAAA;AACA;AAJA;AAPA,GAFA;AAgBA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,wBACA;AACA,WAAA,iBAAA,CAAA,KAAA,GAAA,KAAA;AACA,KAHA;AAIA;AACA,IAAA,UALA,sBAKA,QALA,EAKA;AAAA;;AACA,WAAA,KAAA,CAAA,QAAA,EAAA,QAAA,CAAA,UAAA,KAAA,EAAA;AACA,YAAA,KAAA,EAAA;AACA,cAAA,MAAA,GAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,MAAA;;AACA,cAAA,KAAA,CAAA,SAAA,CAAA,OAAA,EAAA;AACA;AACA,YAAA,eAAA,CAAA,MAAA,EAAA,KAAA,CAAA,SAAA,CAAA,OAAA,EAAA,KAAA,CAAA,SAAA,CAAA,CACA,IADA,CACA,YAAA;AACA,cAAA,KAAA,CAAA,QAAA,CAAA;AAAA,gBAAA,OAAA,EAAA,MAAA;AAAA,gBAAA,IAAA,EAAA;AAAA,eAAA;;AACA,cAAA,KAAA,CAAA,KAAA,CAAA,aAAA,EAAA,KAAA,CAAA,SAAA;;AACA,cAAA,KAAA,CAAA,UAAA;AACA,aALA,EAMA,KANA,CAMA,UAAA,GAAA,EAAA;AACA,cAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,OAAA;AACA,aARA;AASA,WAXA,MAWA;AACA;AACA,YAAA,eAAA,CAAA,MAAA,EAAA,KAAA,CAAA,SAAA,CAAA,CACA,IADA,CACA,YAAA;AACA,cAAA,KAAA,CAAA,QAAA,CAAA;AAAA,gBAAA,OAAA,EAAA,MAAA;AAAA,gBAAA,IAAA,EAAA;AAAA,eAAA;;AACA,cAAA,KAAA,CAAA,KAAA,CAAA,aAAA,EAAA,KAAA,CAAA,SAAA;;AACA,cAAA,KAAA,CAAA,UAAA;AACA,aALA,EAMA,KANA,CAMA,UAAA,GAAA,EAAA;AACA,cAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,OAAA;AACA,aARA;AASA;AACA,SAzBA,MAyBA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,gBAAA;AACA,iBAAA,KAAA;AACA;AACA,OA9BA;AA+BA;AArCA;AAhBA,CAAA","sourcesContent":["<template>\n  <div>\n    <!-- 修改弹窗 -->\n    <el-dialog\n      :visible.sync=\"dialogEditVisible.value\"\n      @close=\"childClose\"\n      width=\"30%\"\n    >\n      <el-form :model=\"albumInfo\" ref=\"albumInfo\" label-width=\"100px\">\n        <el-form-item label=\"专辑名称\">\n          <el-input v-model=\"albumInfo.AlbumName\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"发布日期\">\n          <el-date-picker\n            v-model=\"albumInfo.ReleaseDate\"\n            type=\"datetime\"\n            placeholder=\"选择日期\"\n            format=\"yyyy-MM-dd HH:mm:ss\"\n            value-format=\"yyyy-MM-dd HH:mm:ss\"\n          ></el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"专辑描述\">\n          <el-input type=\"textarea\" v-model=\"albumInfo.AlbumDescription\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"专辑代码\">\n          <el-input v-model=\"albumInfo.AlbumCode\"></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"submitForm('albumInfo')\"\n            >确认修改</el-button\n          >\n        </el-form-item>\n      </el-form>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { updateBandAlbum, createBandAlbum } from \"@/api/request\";\nimport moment from \"moment\";\n\nexport default {\n  name: \"AlbumDialog\",\n  props: {\n    dialogEditVisible: {\n      type: Object,\n      default() {\n        return {};\n      },\n    },\n    albumInfo: {\n      type: Object,\n      default() {\n        return {};\n      },\n    },\n  },\n  methods: {\n    childClose() {\n      this.dialogEditVisible.value = false;\n    },\n    // 提交表单\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          const bandId = this.$store.state.bandId;\n          if (this.albumInfo.AlbumID) {\n            // 更新专辑信息\n            updateBandAlbum(bandId, this.albumInfo.AlbumID, this.albumInfo)\n              .then(() => {\n                this.$message({ message: \"更新成功\", type: \"success\" });\n                this.$emit(\"updateAlbum\", this.albumInfo);\n                this.childClose();\n              })\n              .catch((err) => {\n                this.$message.error(\"更新失败!\");\n              });\n          } else {\n            // 新增专辑\n            createBandAlbum(bandId, this.albumInfo)\n              .then(() => {\n                this.$message({ message: \"新增成功\", type: \"success\" });\n                this.$emit(\"updateAlbum\", this.albumInfo);\n                this.childClose();\n              })\n              .catch((err) => {\n                this.$message.error(\"新增失败!\");\n              });\n          }\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.el-form-item {\n  margin-bottom: 20px;\n}\n</style>"],"sourceRoot":"src/views/band/band_album"}]}