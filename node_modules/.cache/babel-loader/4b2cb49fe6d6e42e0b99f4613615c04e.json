{"remainingRequest":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/babel-loader/lib/index.js!/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/src/views/fan/fan_review/fan_review.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/src/views/fan/fan_review/fan_review.vue","mtime":1736512644885},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/cache-loader/dist/cjs.js","mtime":1735892181475},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/babel-loader/lib/index.js","mtime":1735892181655},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/cache-loader/dist/cjs.js","mtime":1735892181475},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/vue-loader/lib/index.js","mtime":1735892182047}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnBhZC1zdGFydCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgX3R5cGVvZiBmcm9tICIvaG9tZS96ZXJvaHVhL2FwcGxpY2F0aW9uL0Zyb250RW5kL3RzZXQvc3R1X21hbmFnZV9mcm9udC1tYWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICIvaG9tZS96ZXJvaHVhL2FwcGxpY2F0aW9uL0Zyb250RW5kL3RzZXQvc3R1X21hbmFnZV9mcm9udC1tYWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0RmFuUmV2aWV3cywgZGVsZXRlQWxidW1SZXZpZXcsIGFkZEFsYnVtUmV2aWV3IH0gZnJvbSAiQC9hcGkvcmVxdWVzdCI7CmltcG9ydCBSZXZpZXdEaWFsb2cgZnJvbSAiLi9SZXZpZXdEaWFsb2cudnVlIjsKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICJ2dWV4IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJGYW5SZXZpZXciLAogIGNvbXBvbmVudHM6IHsKICAgIFJldmlld0RpYWxvZzogUmV2aWV3RGlhbG9nCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcmV2aWV3RGF0YTogW10sCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBzZWxlY3RlZFJldmlld3M6IFtdCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcFN0YXRlKHsKICAgIGZhbklkOiBmdW5jdGlvbiBmYW5JZChzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuZmFuSWQ7CiAgICB9IC8vIOS7jiBzdG9yZSDkuK3ojrflj5blvZPliY3mrYzov7fnmoQgZmFuSWQKCiAgfSkpLAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldFJldmlld3MoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOiOt+WPluivhOiuugogICAgZ2V0UmV2aWV3czogZnVuY3Rpb24gZ2V0UmV2aWV3cygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGdldEZhblJldmlld3ModGhpcy5mYW5JZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgdmFyIHJldmlld3MgPSByZXMuZGF0YS5yZXZpZXdzOwoKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZXZpZXdzKSkgewogICAgICAgICAgX3RoaXMucmV2aWV3RGF0YSA9IHJldmlld3M7IC8vIOebtOaOpei1i+WAvAogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFeHBlY3RlZCBhbiBhcnJheSwgYnV0IGdvdDonLCBfdHlwZW9mKHJlcy5kYXRhKSk7CiAgICAgICAgICBfdGhpcy5yZXZpZXdEYXRhID0gW107IC8vIOWmguaenOaVsOaNruagvOW8j+S4jeato+ehru+8jOiuvue9ruS4uuepuuaVsOe7hAogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGZldGNoIHJldmlld3M6JywgZXJyb3IpOwogICAgICAgIF90aGlzLnJldmlld0RhdGEgPSBbXTsgLy8g5aaC5p6c6K+35rGC5aSx6LSl77yM6K6+572u5Li656m65pWw57uECiAgICAgIH0pOwogICAgfSwKICAgIC8vIOagvOW8j+WMluaXpeacn+S4uiBZWVlZLU1NLURECiAgICBmb3JtYXREYXRlOiBmdW5jdGlvbiBmb3JtYXREYXRlKGRhdGUpIHsKICAgICAgdmFyIGQgPSBuZXcgRGF0ZShkYXRlKTsKICAgICAgdmFyIHllYXIgPSBkLmdldEZ1bGxZZWFyKCk7CiAgICAgIHZhciBtb250aCA9IChkLmdldE1vbnRoKCkgKyAxKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICIwIik7CiAgICAgIHZhciBkYXkgPSBkLmdldERhdGUoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICIwIik7CiAgICAgIHJldHVybiAiIi5jb25jYXQoeWVhciwgIi0iKS5jb25jYXQobW9udGgsICItIikuY29uY2F0KGRheSk7CiAgICB9LAogICAgLy8g5omT5byA5Y+R6KGo6K+E6K665by556qXCiAgICBvcGVuRGlhbG9nOiBmdW5jdGlvbiBvcGVuRGlhbG9nKCkgewogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIC8vIOWFs+mXreW8ueeqlwogICAgY2xvc2VEaWFsb2c6IGZ1bmN0aW9uIGNsb3NlRGlhbG9nKCkgewogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgIH0sCiAgICAvLyDmj5DkuqTor4TorroKICAgIHN1Ym1pdFJldmlldzogZnVuY3Rpb24gc3VibWl0UmV2aWV3KGRhdGEpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICAvLyDnlJ/miJDlvZPliY3ml6XmnJ/vvIzmoLzlvI/kuLogWVlZWS1NTS1ERAogICAgICB2YXIgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTsgLy8g5o+Q5Y+WIFlZWVktTU0tREQg6YOo5YiGCgogICAgICB2YXIgcmV2aWV3RGF0YSA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZGF0YSksIHt9LCB7CiAgICAgICAgUmV2aWV3RGF0ZTogY3VycmVudERhdGUgLy8g5re75Yqg6K+E6K665pel5pyfCgogICAgICB9KTsKCiAgICAgIGFkZEFsYnVtUmV2aWV3KHRoaXMuZmFuSWQsIGRhdGEuQWxidW1JRCwgcmV2aWV3RGF0YSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMyLiRtZXNzYWdlKHsKICAgICAgICAgIG1lc3NhZ2U6ICLor4Torrrlj5HooajmiJDlip8iLAogICAgICAgICAgdHlwZTogInN1Y2Nlc3MiCiAgICAgICAgfSk7CgogICAgICAgIF90aGlzMi5nZXRSZXZpZXdzKCk7CgogICAgICAgIF90aGlzMi5jbG9zZURpYWxvZygpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDliKDpmaTor4TorroKICAgIGhhbmRsZURlbGV0ZTogZnVuY3Rpb24gaGFuZGxlRGVsZXRlKHJldmlld0lkKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy4kY29uZmlybSgi56Gu6K6k5Yig6Zmk6K+l6K+E6K6677yfIikudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgZGVsZXRlQWxidW1SZXZpZXcoX3RoaXMzLmZhbklkLCByZXZpZXdJZCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczMuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiAi5Yig6Zmk5oiQ5YqfIiwKICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiCiAgICAgICAgICB9KTsKCiAgICAgICAgICBfdGhpczMuZ2V0UmV2aWV3cygpOwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICJpbmZvIiwKICAgICAgICAgIG1lc3NhZ2U6ICLlt7Llj5bmtojliKDpmaQiCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOaJuemHj+WIoOmZpAogICAgYmF0Y2hEZWxldGU6IGZ1bmN0aW9uIGJhdGNoRGVsZXRlKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHRoaXMuJGNvbmZpcm0oIuehruiupOWIoOmZpOmAieS4reivhOiuuu+8nyIpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNC5zZWxlY3RlZFJldmlld3MuZm9yRWFjaChmdW5jdGlvbiAocmV2aWV3SWQpIHsKICAgICAgICAgIGRlbGV0ZUFsYnVtUmV2aWV3KF90aGlzNC5mYW5JZCwgcmV2aWV3SWQpOwogICAgICAgIH0pOwoKICAgICAgICBfdGhpczQuJG1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogIuaJuemHj+WIoOmZpOaIkOWKnyIsCiAgICAgICAgICB0eXBlOiAic3VjY2VzcyIKICAgICAgICB9KTsKCiAgICAgICAgX3RoaXM0LmdldFJldmlld3MoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNC4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAiaW5mbyIsCiAgICAgICAgICBtZXNzYWdlOiAi5bey5Y+W5raI5Yig6ZmkIgogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDliLfmlrDor4TorroKICAgIHJlZnJlc2g6IGZ1bmN0aW9uIHJlZnJlc2goKSB7CiAgICAgIHRoaXMuZ2V0UmV2aWV3cygpOwogICAgfSwKICAgIC8vIOWkhOeQhumAieS4remhuQogICAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVTZWxlY3Rpb25DaGFuZ2Uocm93cykgewogICAgICB0aGlzLnNlbGVjdGVkUmV2aWV3cyA9IHJvd3MubWFwKGZ1bmN0aW9uIChyb3cpIHsKICAgICAgICByZXR1cm4gcm93LlJldmlld0lEOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["fan_review.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"fan-review\">\n    <div class=\"container_wrap\">\n      <div class=\"batchOption\">\n        <el-button icon=\"el-icon-plus\" type=\"success\" @click=\"openDialog\">发表评论</el-button>\n        <el-button icon=\"el-icon-delete\" type=\"danger\" @click=\"batchDelete\">删除选中</el-button>\n        <el-button icon=\"el-icon-refresh\" type=\"warning\" @click=\"refresh\">刷新评论</el-button>\n      </div>\n\n      <el-table :data=\"reviewData\" border @selection-change=\"handleSelectionChange\">\n        <el-table-column type=\"selection\" width=\"55\"> </el-table-column>\n        <el-table-column prop=\"ReviewID\" label=\"评论ID\" width=\"100\"> </el-table-column>\n        <el-table-column prop=\"AlbumID\" label=\"专辑ID\" width=\"100\"> </el-table-column>\n        <el-table-column prop=\"Comment\" label=\"评论内容\" width=\"200\"> </el-table-column>\n        <el-table-column prop=\"Rating\" label=\"评分\" width=\"100\"> </el-table-column>\n        <el-table-column prop=\"ReviewDate\" label=\"评论日期\" width=\"150\">\n          <template slot-scope=\"scope\">\n            <!-- 格式化日期为 YYYY-MM-DD -->\n            {{ formatDate(scope.row.ReviewDate) }}\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\">\n          <template slot-scope=\"scope\">\n            <el-button size=\"mini\" type=\"danger\" icon=\"el-icon-delete\" @click=\"handleDelete(scope.row.ReviewID)\">删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n\n    <!-- 发表评论弹窗 -->\n    <ReviewDialog :dialogVisible=\"dialogVisible\" @closeDialog=\"closeDialog\" @submitReview=\"submitReview\"></ReviewDialog>\n  </div>\n</template>\n\n<script>\nimport { getFanReviews, deleteAlbumReview, addAlbumReview } from \"@/api/request\";\nimport ReviewDialog from \"./ReviewDialog.vue\";\nimport { mapState } from \"vuex\";\n\nexport default {\n  name: \"FanReview\",\n  components: {\n    ReviewDialog,\n  },\n  data() {\n    return {\n      reviewData: [],\n      dialogVisible: false,\n      selectedReviews: [],\n    };\n  },\n  computed: {\n    ...mapState({\n      fanId: (state) => state.fanId, // 从 store 中获取当前歌迷的 fanId\n    }),\n  },\n  created() {\n    this.getReviews();\n  },\n  methods: {\n    // 获取评论\n    getReviews() {\n      getFanReviews(this.fanId).then((res) => {\n        let { reviews } = res.data;\n        if (Array.isArray(reviews)) {\n          this.reviewData = reviews; // 直接赋值\n        } else {\n          console.error('Expected an array, but got:', typeof res.data);\n          this.reviewData = []; // 如果数据格式不正确，设置为空数组\n        }\n      }).catch((error) => {\n        console.error('Failed to fetch reviews:', error);\n        this.reviewData = []; // 如果请求失败，设置为空数组\n      });\n    },\n    // 格式化日期为 YYYY-MM-DD\n    formatDate(date) {\n      const d = new Date(date);\n      const year = d.getFullYear();\n      const month = (d.getMonth() + 1).toString().padStart(2, \"0\");\n      const day = d.getDate().toString().padStart(2, \"0\");\n      return `${year}-${month}-${day}`;\n    },\n    // 打开发表评论弹窗\n    openDialog() {\n      this.dialogVisible = true;\n    },\n    // 关闭弹窗\n    closeDialog() {\n      this.dialogVisible = false;\n    },\n    // 提交评论\n    submitReview(data) {\n      // 生成当前日期，格式为 YYYY-MM-DD\n      const currentDate = new Date().toISOString().split('T')[0]; // 提取 YYYY-MM-DD 部分\n      const reviewData = {\n        ...data,\n        ReviewDate: currentDate, // 添加评论日期\n      };\n\n      addAlbumReview(this.fanId, data.AlbumID, reviewData).then(() => {\n        this.$message({ message: \"评论发表成功\", type: \"success\" });\n        this.getReviews();\n        this.closeDialog();\n      });\n    },\n    // 删除评论\n    handleDelete(reviewId) {\n      this.$confirm(\"确认删除该评论？\")\n        .then(() => {\n          deleteAlbumReview(this.fanId, reviewId).then(() => {\n            this.$message({ message: \"删除成功\", type: \"success\" });\n            this.getReviews();\n          });\n        })\n        .catch(() => {\n          this.$message({ type: \"info\", message: \"已取消删除\" });\n        });\n    },\n    // 批量删除\n    batchDelete() {\n      this.$confirm(\"确认删除选中评论？\")\n        .then(() => {\n          this.selectedReviews.forEach((reviewId) => {\n            deleteAlbumReview(this.fanId, reviewId);\n          });\n          this.$message({ message: \"批量删除成功\", type: \"success\" });\n          this.getReviews();\n        })\n        .catch(() => {\n          this.$message({ type: \"info\", message: \"已取消删除\" });\n        });\n    },\n    // 刷新评论\n    refresh() {\n      this.getReviews();\n    },\n    // 处理选中项\n    handleSelectionChange(rows) {\n      this.selectedReviews = rows.map((row) => row.ReviewID);\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.fan-review {\n  .batchOption {\n    margin-bottom: 5px;\n    .el-button {\n      font-size: 10px;\n      padding: 5px;\n    }\n  }\n}\n</style>\n"],"sourceRoot":"src/views/fan/fan_review"}]}