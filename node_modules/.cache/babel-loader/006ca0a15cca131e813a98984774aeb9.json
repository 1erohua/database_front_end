{"remainingRequest":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/babel-loader/lib/index.js!/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/src/views/fan/fan_un/fan_un.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/src/views/fan/fan_un/fan_un.vue","mtime":1736429902015},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/cache-loader/dist/cjs.js","mtime":1735892181475},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/babel-loader/lib/index.js","mtime":1735892181655},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/cache-loader/dist/cjs.js","mtime":1735892181475},{"path":"/home/zerohua/application/FrontEnd/tset/stu_manage_front-main/node_modules/vue-loader/lib/index.js","mtime":1735892182047}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0VW5mb2xsb3dlZEJhbmRzLCBnZXRVbmZvbGxvd2VkQWxidW1zLCBnZXRVbmZvbGxvd2VkU29uZ3MsIGdldFVuYXR0ZW5kZWRDb25jZXJ0cywgYWRkTGlrZWRCYW5kLCBhZGRMaWtlZEFsYnVtLCBhZGRMaWtlZFNvbmcsIGFkZEF0dGVuZGVkQ29uY2VydCB9IGZyb20gIkAvYXBpL3JlcXVlc3QiOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7IC8vIOW8leWFpSBtb21lbnQuanMKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRmFuSGVMaWtlcyIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVuZm9sbG93ZWRCYW5kczogW10sCiAgICAgIHVuZm9sbG93ZWRBbGJ1bXM6IFtdLAogICAgICB1bmZvbGxvd2VkU29uZ3M6IFtdLAogICAgICB1bmF0dGVuZGVkQ29uY2VydHM6IFtdCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGZhbklkOiBmdW5jdGlvbiBmYW5JZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmZhbklkOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0VW5mb2xsb3dlZERhdGEoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOiOt+WPluaJgOacieacquWFs+azqOeahOaVsOaNrgogICAgZ2V0VW5mb2xsb3dlZERhdGE6IGZ1bmN0aW9uIGdldFVuZm9sbG93ZWREYXRhKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgZ2V0VW5mb2xsb3dlZEJhbmRzKHRoaXMuZmFuSWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLnVuZm9sbG93ZWRCYW5kcyA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgICAgZ2V0VW5mb2xsb3dlZEFsYnVtcyh0aGlzLmZhbklkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpcy51bmZvbGxvd2VkQWxidW1zID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgICBnZXRVbmZvbGxvd2VkU29uZ3ModGhpcy5mYW5JZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMudW5mb2xsb3dlZFNvbmdzID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgICBnZXRVbmF0dGVuZGVkQ29uY2VydHModGhpcy5mYW5JZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMudW5hdHRlbmRlZENvbmNlcnRzID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWIt+aWsOWIl+ihqAogICAgcmVmcmVzaDogZnVuY3Rpb24gcmVmcmVzaChldmVudCkgewogICAgICB0aGlzLmxvc3RCbHVyKGV2ZW50KTsKICAgICAgdGhpcy5nZXRVbmZvbGxvd2VkRGF0YSgpOwogICAgfSwKICAgIC8vIOWFs+azqOS5kOmYnwogICAgZm9sbG93QmFuZDogZnVuY3Rpb24gZm9sbG93QmFuZChiYW5kSWQpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBhZGRMaWtlZEJhbmQodGhpcy5mYW5JZCwgYmFuZElkKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgbWVzc2FnZTogIuWFs+azqOaIkOWKnyEiCiAgICAgICAgfSk7CgogICAgICAgIF90aGlzMi5nZXRVbmZvbGxvd2VkRGF0YSgpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDlhbPms6jkuJPovpEKICAgIGZvbGxvd0FsYnVtOiBmdW5jdGlvbiBmb2xsb3dBbGJ1bShhbGJ1bUlkKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgYWRkTGlrZWRBbGJ1bSh0aGlzLmZhbklkLCBhbGJ1bUlkKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgbWVzc2FnZTogIuWFs+azqOaIkOWKnyEiCiAgICAgICAgfSk7CgogICAgICAgIF90aGlzMy5nZXRVbmZvbGxvd2VkRGF0YSgpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDlhbPms6jmrYzmm7IKICAgIGZvbGxvd1Nvbmc6IGZ1bmN0aW9uIGZvbGxvd1Nvbmcoc29uZ0lkKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgYWRkTGlrZWRTb25nKHRoaXMuZmFuSWQsIHNvbmdJZCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM0LiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgIG1lc3NhZ2U6ICLlhbPms6jmiJDlip8hIgogICAgICAgIH0pOwoKICAgICAgICBfdGhpczQuZ2V0VW5mb2xsb3dlZERhdGEoKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5Y+C5Yqg5ryU5ZSx5LyaCiAgICBhdHRlbmRDb25jZXJ0OiBmdW5jdGlvbiBhdHRlbmRDb25jZXJ0KGNvbmNlcnRJZCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIGFkZEF0dGVuZGVkQ29uY2VydCh0aGlzLmZhbklkLCBjb25jZXJ0SWQpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNS4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICBtZXNzYWdlOiAi5Y+C5Yqg5oiQ5YqfISIKICAgICAgICB9KTsKCiAgICAgICAgX3RoaXM1LmdldFVuZm9sbG93ZWREYXRhKCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWkseeEpuWkhOeQhgogICAgbG9zdEJsdXI6IGZ1bmN0aW9uIGxvc3RCbHVyKGV2ZW50KSB7CiAgICAgIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQ7CgogICAgICBpZiAodGFyZ2V0Lm5vZGVOYW1lID09ICJTUEFOIikgewogICAgICAgIHRhcmdldCA9IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlOwogICAgICB9CgogICAgICB0YXJnZXQuYmx1cigpOwogICAgfSwKICAgIC8vIOagvOW8j+WMluaXpeacnwogICAgZm9ybWF0RGF0ZTogZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlKSB7CiAgICAgIHJldHVybiBkYXRlID8gbW9tZW50KGRhdGUpLmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbTpzcycpIDogJyc7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["fan_un.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"fan-likes\">\n    <div class=\"container_wrap\">\n      <div class=\"batchOption\">\n        <el-button icon=\"el-icon-refresh\" type=\"warning\" @click=\"refresh($event)\"\n          >刷新列表</el-button\n        >\n      </div>\n\n      <!-- 未关注的乐队 -->\n      <el-table :data=\"unfollowedBands\" border class=\"table\">\n        <el-table-column prop=\"BandName\" label=\"乐队名称\" width=\"150\">\n        </el-table-column>\n        <el-table-column prop=\"FormationDate\" label=\"成立日期\" width=\"150\">\n          <template slot-scope=\"scope\">\n            {{ formatDate(scope.row.FormationDate) }}\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"BandDescription\" label=\"乐队描述\" width=\"200\">\n        </el-table-column>\n        <el-table-column label=\"操作\">\n          <template slot-scope=\"scope\">\n            <el-button\n              size=\"mini\"\n              type=\"primary\"\n              icon=\"el-icon-plus\"\n              @click=\"followBand(scope.row.BandID)\"\n              >关注</el-button\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <!-- 未关注的专辑 -->\n      <el-table :data=\"unfollowedAlbums\" border class=\"table\">\n        <el-table-column prop=\"AlbumName\" label=\"专辑名称\" width=\"150\">\n        </el-table-column>\n        <el-table-column prop=\"ReleaseDate\" label=\"发行日期\" width=\"150\">\n          <template slot-scope=\"scope\">\n            {{ formatDate(scope.row.ReleaseDate) }}\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"AlbumDescription\" label=\"专辑描述\" width=\"200\">\n        </el-table-column>\n        <el-table-column label=\"操作\">\n          <template slot-scope=\"scope\">\n            <el-button\n              size=\"mini\"\n              type=\"primary\"\n              icon=\"el-icon-plus\"\n              @click=\"followAlbum(scope.row.AlbumID)\"\n              >关注</el-button\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <!-- 未关注的歌曲 -->\n      <el-table :data=\"unfollowedSongs\" border class=\"table\">\n        <el-table-column prop=\"SongName\" label=\"歌曲名称\" width=\"150\">\n        </el-table-column>\n        <el-table-column prop=\"Lyricist\" label=\"作词人\" width=\"150\">\n        </el-table-column>\n        <el-table-column prop=\"Composer\" label=\"作曲人\" width=\"150\">\n        </el-table-column>\n        <el-table-column label=\"操作\">\n          <template slot-scope=\"scope\">\n            <el-button\n              size=\"mini\"\n              type=\"primary\"\n              icon=\"el-icon-plus\"\n              @click=\"followSong(scope.row.SongID)\"\n              >关注</el-button\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <!-- 未参加的演唱会 -->\n      <el-table :data=\"unattendedConcerts\" border class=\"table\">\n        <el-table-column prop=\"ConcertName\" label=\"演唱会名称\" width=\"150\">\n        </el-table-column>\n        <el-table-column prop=\"ConcertDate\" label=\"演唱会日期\" width=\"150\">\n          <template slot-scope=\"scope\">\n            {{ formatDate(scope.row.ConcertDate) }}\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"Location\" label=\"地点\" width=\"150\">\n        </el-table-column>\n        <el-table-column label=\"操作\">\n          <template slot-scope=\"scope\">\n            <el-button\n              size=\"mini\"\n              type=\"primary\"\n              icon=\"el-icon-plus\"\n              @click=\"attendConcert(scope.row.ConcertID)\"\n              >参加</el-button\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {\n  getUnfollowedBands,\n  getUnfollowedAlbums,\n  getUnfollowedSongs,\n  getUnattendedConcerts,\n  addLikedBand,\n  addLikedAlbum,\n  addLikedSong,\n  addAttendedConcert,\n} from \"@/api/request\";\nimport moment from \"moment\"; // 引入 moment.js\n\nexport default {\n  name: \"FanHeLikes\",\n  data() {\n    return {\n      unfollowedBands: [],\n      unfollowedAlbums: [],\n      unfollowedSongs: [],\n      unattendedConcerts: [],\n    };\n  },\n  computed: {\n    fanId() {\n      return this.$store.state.fanId;\n    },\n  },\n  created() {\n    this.getUnfollowedData();\n  },\n  methods: {\n    // 获取所有未关注的数据\n    getUnfollowedData() {\n      getUnfollowedBands(this.fanId).then((res) => {\n        this.unfollowedBands = res.data;\n      });\n      getUnfollowedAlbums(this.fanId).then((res) => {\n        this.unfollowedAlbums = res.data;\n      });\n      getUnfollowedSongs(this.fanId).then((res) => {\n        this.unfollowedSongs = res.data;\n      });\n      getUnattendedConcerts(this.fanId).then((res) => {\n        this.unattendedConcerts = res.data;\n      });\n    },\n    // 刷新列表\n    refresh(event) {\n      this.lostBlur(event);\n      this.getUnfollowedData();\n    },\n    // 关注乐队\n    followBand(bandId) {\n      addLikedBand(this.fanId, bandId).then(() => {\n        this.$message({ type: \"success\", message: \"关注成功!\" });\n        this.getUnfollowedData();\n      });\n    },\n    // 关注专辑\n    followAlbum(albumId) {\n      addLikedAlbum(this.fanId, albumId).then(() => {\n        this.$message({ type: \"success\", message: \"关注成功!\" });\n        this.getUnfollowedData();\n      });\n    },\n    // 关注歌曲\n    followSong(songId) {\n      addLikedSong(this.fanId, songId).then(() => {\n        this.$message({ type: \"success\", message: \"关注成功!\" });\n        this.getUnfollowedData();\n      });\n    },\n    // 参加演唱会\n    attendConcert(concertId) {\n      addAttendedConcert(this.fanId, concertId).then(() => {\n        this.$message({ type: \"success\", message: \"参加成功!\" });\n        this.getUnfollowedData();\n      });\n    },\n    // 失焦处理\n    lostBlur(event) {\n      let target = event.target;\n      if (target.nodeName == \"SPAN\") {\n        target = event.target.parentNode;\n      }\n      target.blur();\n    },\n    // 格式化日期\n    formatDate(date) {\n      return date ? moment(date).format('YYYY-MM-DD HH:mm:ss') : '';\n    }\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.fan-likes {\n  .batchOption {\n    margin-bottom: 5px;\n    .el-button {\n      font-size: 10px;\n      padding: 5px;\n    }\n  }\n  .table {\n    margin-bottom: 20px;\n  }\n}\n</style>"],"sourceRoot":"src/views/fan/fan_un"}]}